## Code Documentation

This document gives an overview of how this design was implemented.

### Setup

There shouldn't be much setup. Just clone the repo. If you don't have [BOSL2](https://github.com/BelfrySCAD/BOSL2) installed, you can just `git submodule init` and `git submodule update` to get it in the repo directory.

You may also need to `chmod +x buildall` before you can run the build script. It references `/usr/bin/python`, so if that doesn't exist, make a symlink (or change the interpreter in `buildall` or run it with python or whatever you'd like)

### Build System

I made a silly little custom build system, since openscad is funny and I couldn't find something that fits my needs.
You'll see comments above modules like this:

```openscad
// @build tip_thread_m_nodfm.stl include_dfm=false
// @build tip_thread_m.stl include_dfm=true
module tip_thread_m(
   // ...,
   include_dfm=true){
    // ...
}
```

This tells the build system to build two stls from this module: one with the parameter `include_dfm` set to `true`, and the other `false`.

To build the .stl files, run the build script:

```bash
./buildall
```

There are a variety of command line arguments. You can see the docs with `./buildall --help`.

This exports all files to the build folder. It also runs the CAM script, which generates some gcode for cutting the EPP. This is not well documented since it was just a one-off I made for myself and my specific setup. If you want to do a similar thing, you should just write your own gcode. It's not hard, and you'll be able to debug it much easier.

If you do want to use mine, you can see the docs like this:
```bash
python epp_cam.py --help
```

Any unknown arguments to `./buildall` are passed to `epp_cam.py`, so you can set the CAM parameters when using the `./buildall` script.


### Assemblies

`assemblies.scad` contains all TLAs (**T**op-**L**evel **A**ssemblies). This is not as helpful as it should be; you still have to go in and highlight or hide things to actually see what's going on, because openscad doesn't have a great way to prevent merging of touching parts.
It maybe helpful to make a section view:

```openscad
difference(){
    long_tla();
    cube(10000, anchor=RIGHT);
}
```

### Parameters

All values are in millimeters. If you have a measurement in inches, there's a convenient variable `INCH` which is defined as `25.4`; please use `INCH` instead of the number to avoid magic numbers.

`params.scad` contains all system-wide parameters. Other parameters fall into two categories:
 - **local parameters** are arguments to modules. They only impact the part generated by that module (not its children).
 - **shared parameters** are variables starting with a `$`, which openscad shares with children. This helps parts that need to fit together share the same parameters. Defaults are defined at the top of the files, and new values can be passed in as keyword arguments to modules.

At some point in the future I hope to integrate this with Customizer, but that's not high on my priority list right now.